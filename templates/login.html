{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-5">
    <div class="card shadow-sm">
      <div class="card-body">
        <h3 class="card-title text-center">Login</h3>

        <form method="POST">
          <!-- ðŸ”¹ Email with mic -->
          <div class="mb-3">
            <label>Email</label>
            <div class="input-group">
              <input type="email" name="email" id="email" class="form-control" required>
              <button type="button" class="btn btn-outline-secondary" onclick="voiceInput('email')" title="Speak your email">ðŸŽ¤</button>
            </div>
          </div>

          <!-- ðŸ”¹ Password with mic -->
          <div class="mb-3">
            <label>Password</label>
            <div class="input-group">
              <input type="password" name="password" id="password" class="form-control" required>
              <button type="button" class="btn btn-outline-secondary" onclick="voiceInput('password')" title="Speak your password">ðŸŽ¤</button>
            </div>
          </div>

          <button class="btn btn-primary w-100">Login</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
function voiceInput(fieldId) {
  const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recognition.lang = 'en-US';
  recognition.start();

  recognition.onresult = function(event) {
    let spokenText = event.results[0][0].transcript.toLowerCase().trim();

    // âœ¨ Replace spoken words with actual characters
    spokenText = spokenText
      .replace(/ at /g, '@')
      .replace(/ dot /g, '.')
      .replace(/ dotcom/g, '.com')
      .replace(/\s/g, '');  // Remove spaces for email/password

    document.getElementById(fieldId).value = spokenText;
  };

  recognition.onerror = function(event) {
    alert("Voice error: " + event.error);
  };
}
</script>
{% endblock %}

